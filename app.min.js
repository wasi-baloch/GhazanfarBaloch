// var quizForm=document.forms["Quiz-Form"];
// quizForm.addeventlistener("submit", (e) => {
//     e.preventDefualt()
//     var value=document.querySelector("Quiz-Form input[tupe='text']").value;
//     if (value !== ""){
//         sessionStorage.setItem("name", value)
//         // location.href="quiz.html"
//         window.location.href="quiz.html"
        
//     }
// })
let totalMarks= 20
let maxTime = 30
let marksPerQuestion=1
let exam="Chapter1"

function vlidate(){
    sessionStorage.clear();
    var input = document.getElementById("userName");
    if(input.value == "" || input.value == " "){
        alert("User Name Required!");
        // window.open("index.html");
    }
    else {
        sessionStorage.setItem("name",input.value);
        startQuiz();

        // location.href = "quiz.html";
        // alert(sessionStorage.getItem("name") )

        // document.getElementById("result").innerHTML = sessionStorage.getItem("name");
    }
}

function chapterVlidation(e){
    // exam=
    console.log(e)
    alert(e)
}

var questionCount = 0;
var score = 0;
var currentAns = "";

// let availableQuestions = [];

// function setAvailableQuestion(){
//     const totalQuestion=questionsArray.length;
//     for(let i=0; i<totalQuestion; i++){
//         availableQuestions.push(questionsArray[i])
//     }
//     console.log(availableQuestions)
// }




function renderQuestion(x){
    var questionElement = document.getElementById("divQuestion");
    questionElement.innerHTML = "Q"+(x+1)+". "+questionsArray[x].question;
    var optionsElement = document.getElementsByClassName("divOption");
    for(var i = 0; i < optionsElement.length; i++){
        optionsElement[i].innerHTML = questionsArray[x].options[i].toUpperCase();
    }
}

// Timmer----------------------- 
function startTime(){
    var startingMin = maxTime;
    var time = startingMin * 60;
    var timerPara = document.getElementById("timer");

    function updateCountDown(){
        var minutes = Math.floor(time / 60)
        var seconds = time % 60;
        
        if(seconds < 10){
            seconds = "0"+seconds;
        }
        if(minutes < 10){
            minutes = "0"+minutes;
        }
        
        timerPara.innerHTML = minutes + ":" + seconds;
        time--;

        if(minutes == 00 && seconds == 00){
            alert("Oopps!! Time Up");
            window.location.href = "result.html";
        }
    }
    setInterval(updateCountDown, 1000);
}

function putActiveClass(x){
    var optionsElement = document.getElementsByClassName("card-text");
    for(var i = 0; i < optionsElement.length; i++){
        optionsElement[i].classList.remove("active")
    }
    optionsElement[x].classList.add("active");
}

function removeActiveClass(){
    var optionsElement = document.getElementsByClassName("card-text");
    for(var i = 0; i < optionsElement.length; i++){
        optionsElement[i].classList.remove("active")
    }
}

function checkAnswer(x){
    var userAns = document.getElementsByClassName("active");
    if(userAns[0].innerHTML.toLocaleLowerCase() == questionsArray[x].answer){
        score += marksPerQuestion;
    }
}   

function showNextQuestion(){
    
    checkAnswer(questionCount);
    questionCount++;
    if(questionCount <= questionsArray.length-1){
        renderQuestion(questionCount);
        
    }
    removeActiveClass();
    setResult();

}




function startQuiz(){
    window.location.href = "quiz.html";
}

function setResult(){
    if(questionCount == questionsArray.length){
        
        window.location.href = "result.html";
        // console.log(student)

        // console.log(firebsce)
        
        // alert(student)
    }
    var result = document.getElementById("result");
    sessionStorage.setItem("userscore", score);
}

function renderResult(){
    var cs = sessionStorage.getItem("userscore");
    result.innerHTML = "<h1> Your scored "+ cs +" out of "+ totalMarks ;
    saveResultForNine()
}



function saveResultForNine(){
    var today = new Date()
    var database = firebase.database().ref('9th/'+exam)
    
    var key=database.push().key;
    var student ={
        name: sessionStorage.getItem("name"),
        totalMarks: totalMarks,
        key: key,
        score: sessionStorage.getItem("userscore"),
        chapter: 1,
        testDate: today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate()
    }
database.child(key).set(student)
}